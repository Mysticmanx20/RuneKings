
goblin_village_scripted_effect = {
	
	
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
	}
	title:k_gobvil = {
		change_title_holder = {
			holder = scope:founder
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
	
	hidden_effect = {
		title:k_gobvil = { set_de_jure_liege_title = title:e_zaros }
	}
	
	# Make it your capital if it wasn't already.
	if = {
		limit = {
			NOR = { 
				capital_county = title:c_gobvilgreen 
				capital_county = title:c_gobvil
			}
		}
		set_realm_capital = title:c_gobvilgreen
	}
	# And convert it to your culture if it wasn't Goblin.
	if = {
		limit = {
			NOR = {
				title:c_gobvilgreen.culture = {
					culture = culture:goblin
				}
				title:c_gobvil.culture = {
					culture = culture:goblin
				}
			}
		}
		title:c_gobvilgreen = { set_county_culture = scope:founder.culture }
		title:c_gobvil = { set_county_culture = scope:founder.culture }
	}

	add_legitimacy = minor_legitimacy_gain
	
}


##########################################################################################
#Scripted effects relating to Stealing Schemes

#Used in the immediate of the Scheme Owner's success event
steal_gold_success_effect = {
	scope:target = {
		pay_short_term_gold = {
			target = scope:owner
			gold = medium_treasury_value
		}
	}

	if = {
		limit = {
			scope:scheme = {
				is_scheme_exposed = yes
			}
		}

		scope:owner = {
			hidden_effect = {
				add_secret = {
					type = secret_thief
					target = scope:target
				}
			}
		}

	}
}

steal_gold_failure_effect = {
	#Add thief trait to the target
	scope:target = {	
		add_character_modifier = {
			modifier = watchful_modifier
			days = watchful_modifier_duration
		}
	}

}
